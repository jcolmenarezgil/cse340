<h1><%= title %></h1>

<%- messages() %>

<% if (errors) { %>
    <ul class="notice">
        <% errors.array().forEach(error => { %>
            <li><%= error.msg %></li>
        <% }) %>
    </ul>
<% } %>

<form id="compose-form" class="compose-form" action="/message/new" method="post">
        <div class="form-group">
            <label for="message_to">To:
            <%- recipientList %>
            </label>
        </div>
        <div class="form-group">
            <label for="message_subject">Subject:
            <input type="text" id="message_subject" name="message_subject" required value="<%= locals.message_subject || '' %>">
            </label>
        </div>
        <div class="form-group">
            <label for="message_body">Message:
            <textarea id="message_body" name="message_body" rows="5" required><%= locals.message_body || '' %></textarea>
            </label>
        </div>
        <button type="submit" class="form-button">Send Message</button>
</form>